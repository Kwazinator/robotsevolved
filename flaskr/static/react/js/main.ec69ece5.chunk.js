(this["webpackJsonpreact-frontend"]=this["webpackJsonpreact-frontend"]||[]).push([[0],{18:function(t,e,o){t.exports=o(41)},23:function(t,e,o){},41:function(t,e,o){"use strict";o.r(e);var a=o(0),n=o.n(a),r=o(17),i=o.n(r),l=(o(23),o(3)),s=o(4),c=o(6),p=o(5),u=o(2),f={yellow:{UP:"/static/images/yellow_up.png",DOWN:"/static/images/yellow_down.png",LEFT:"/static/images/yellow_left.png",RIGHT:"/static/images/yellow_up.png"},red:{UP:"/static/images/red_up.png",DOWN:"/static/images/red_down.png",LEFT:"/static/images/red_left.png",RIGHT:"/static/images/red_right.png"},green:{UP:"/static/images/green_up.png",DOWN:"/static/images/green_down.png",LEFT:"/static/images/green_left.png",RIGHT:"/static/images/green_right.png"},blue:{UP:"/static/images/blue_up.png",DOWN:"/static/images/blue_down.png",LEFT:"/static/images/blue_left.png",RIGHT:"/static/images/blue_right.png"}},m=function(t){var e=t.dimension,o=t.position,a=e+"px";return{width:a,height:a,backgroundColor:"#59544f",position:"absolute",top:o.top+"px",left:o.left+"px",transition:"all 0.1s ease"}},d=function(t){var e=t.dimension,o=(t.position,e-4+"px");return{width:o,height:o,backgroundColor:"#c2aea1",position:"absolute",top:"2px",left:"2px",transition:"all 0.1s ease"}},h=function(t){var e=t.dimension,o=(t.position,(e-4)/2+"px");return{width:o,height:o,backgroundColor:"#ebd5c7",position:"absolute",top:(e-4)/4+"px",left:(e-4)/4+"px",transition:"all 0.1s ease"}},g=function(t){return n.a.createElement("div",{style:m(t)},n.a.createElement("div",{style:d(t)},n.a.createElement("div",{style:h(t)})))},y=function(t,e){return{width:t+"px",height:e+"px",border:"1px solid black",position:"relative",margin:"25px auto",overflow:"hidden",float:"left",marginRight:"30px"}},b=function(t){var e=t.width,o=t.height,a=t.children;return n.a.createElement("div",{style:y(e,o)},a)};function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var w=function(t){var e=t.dimension,o=t.position,a=(t.color,e+"px");return{width:a,height:a,backgroundColor:"#59544f",position:"absolute",top:o.top+"px",left:o.left+"px",transition:"all 0.1s ease"}},S=function(t){var e=t.dimension,o=(t.position,t.color,e-4+"px");return{width:o,height:o,backgroundColor:"#c2aea1",position:"absolute",top:"2px",left:"2px",transition:"all 0.1s ease"}},x=function(t){var e=t.dimension,o=(t.position,e-4-8+"px");return{width:o,height:o,backgroundColor:t.color,position:"absolute",borderRadius:"50%",top:"4px",left:"4px",transition:"all 0.1s ease"}},E=function(t){Object(c.a)(a,t);var e,o=(e=a,function(){var t,o=Object(u.a)(e);if(v()){var a=Object(u.a)(this).constructor;t=Reflect.construct(o,arguments,a)}else t=o.apply(this,arguments);return Object(p.a)(this,t)});function a(){var t;Object(l.a)(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).handleKeyDown=function(e){var o;switch(e.keyCode){case 37:o={top:0,left:-40,dir:"LEFT"};break;case 38:o={top:-40,left:0,dir:"UP"};break;case 39:o={top:0,left:40,dir:"RIGHT"};break;case 40:o={top:40,left:0,dir:"DOWN"};break;default:return}t.props.handlePlayerMovement(o)},t.handleClick=function(){t.props.onClick(t.props.index)},t}return Object(s.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{onClick:this.handleClick,style:w(this.props)},n.a.createElement("div",{style:S(this.props)},n.a.createElement("div",{style:x(this.props)})))}},{key:"componentDidMount",value:function(){window.onkeydown=this.handleKeyDown}}]),a}(n.a.Component),k=function(t){var e=t.orientation,o=t.dimension,a=t.position;if("horizontal"==e)var n=o+"px",r="8px";else n="8px",r=o+"px";return{width:n,height:r,backgroundColor:"black",position:"absolute",top:a.top+"px",left:a.left+"px",transition:"all 0.1s ease"}},z=function(t){return n.a.createElement("div",{style:k(t)})},M=function(t){var e=t.dimension,o=t.position,a=e+"px";return{width:a,height:a,position:"absolute",top:o.top+"px",left:o.left+"px",transition:"all 0.1s ease"}},R=function(t){return n.a.createElement("img",{src:"/static/images/swirl.png",style:M(t)})},O=o(7),P=o.n(O),H=function(t){var e=t.highscores;return n.a.createElement("div",{style:{marginBottom:"10px",clear:"left"}},"All Highscores:",e.map((function(t){return function(t){return n.a.createElement("div",{style:{marginBottom:"20px",marginTop:"10px"}},"By: "+t.comment,n.a.createElement("div",null,"Moves: "+t.numMoves))}(t)})))};function T(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}window.addEventListener("keydown",(function(t){[32,37,38,39,40].indexOf(t.keyCode)>-1&&t.preventDefault()}),!1);var C=function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);return t},D=function(t){var e,o,a=0;do{a=0,e=Math.floor(Math.random()*Math.floor(16)),o=Math.floor(Math.random()*Math.floor(16)),t.map((function(t){40*e==t.top&&40*o==t.left&&(a=1)}))}while(1==a);return{top:40*e,left:40*o}},_=function(t){Object(c.a)(a,t);var e,o=(e=a,function(){var t,o=Object(u.a)(e);if(T()){var a=Object(u.a)(this).constructor;t=Reflect.construct(o,arguments,a)}else t=o.apply(this,arguments);return Object(p.a)(this,t)});function a(t){var e;if(Object(l.a)(this,a),(e=o.call(this,t)).robotSelect=function(t){e.setState({robotSelected:t})},e.submitPuzzle=function(t){t.preventDefault();var o=document.getElementById("namesubmit").value,a=e.state;a.playerState=e.state.playerStart.slice(),a.moveHistory=[],a.createMode="No",P.a.post("/submitpuzzle",C({puzzledata:a},{name:o})).then((function(t){console.log(t),console.log(t.data),e.setState({uri:t.data.uri}),window.location.href=window.location.host+"/play/"+t.data.uri}))},e.isCreateMode=function(){return"Yes"==e.state.createMode?n.a.createElement("div",null,n.a.createElement("form",{onSubmit:e.submitPuzzle,style:{marginRight:"5px",marginTop:"15px",marginBottom:"15px",float:"left"}},n.a.createElement("button",{type:"submit"},"Add Puzzle to Database")),n.a.createElement("input",{style:{marginRight:"5px",marginTop:"15px",marginBottom:"15px",float:"left"},id:"namesubmit",type:"text",placeholder:"Name Of Puzzle?"})):void 0},e.submitAnswer=function(t){t.preventDefault(),console.log(e.state.uri),P.a.post("/submithighscore",{highscore:e.state.moveHistory.length,name:document.getElementById("namesubmitHS").value,uri:e.state.uri}).then((function(t){console.log(t),console.log(t.data)}))},e.resetPuzzle=function(t){t.preventDefault(),e.setState({playerState:e.state.playerStart.slice(),moveHistory:[]})},e.handleCollision=function(t,o,a){var n;switch(t.dir){case"UP":var r=e.state.playerState[o].left,i=e.state.playerState[o].top,l=0;e.state.wallHorizontal.map((function(t){t.left==r&&t.top<i&&t.top>l&&(l=t.top+4)})),e.state.playerState.map((function(t){t.left==r&&t.top<i&&t.top>l-4&&(l=t.top+40)})),n={top:l,left:r,color:a};break;case"RIGHT":r=e.state.playerState[o].left,i=e.state.playerState[o].top,l=600;e.state.wallVerticle.map((function(t){t.top==i&&t.left>r&&t.left<l&&(l=t.left-36)})),e.state.playerState.map((function(t){t.top==i&&t.left>r&&t.left<l+36&&(l=t.left-40)})),n={top:i,left:l,color:a};break;case"LEFT":r=e.state.playerState[o].left,i=e.state.playerState[o].top,l=0;e.state.wallVerticle.map((function(t){t.top==i&&t.left<r&&t.left>l&&(l=t.left+4)})),e.state.playerState.map((function(t){t.top==i&&t.left<r&&t.left>l-4&&(l=t.left+40)})),n={top:i,left:l,color:a};break;case"DOWN":r=e.state.playerState[o].left,i=e.state.playerState[o].top,l=600;e.state.wallHorizontal.map((function(t){t.left==r&&t.top>i&&t.top<l&&(l=t.top-36)})),e.state.playerState.map((function(t){t.left==r&&t.top>i&&t.top<l+36&&(l=t.top-40)})),n={top:l,left:r,color:a};break;default:return}return n},e.checkwin=function(t){return t.top==e.state.goal.top&&t.left==e.state.goal.left?"No"==e.state.createMode?n.a.createElement("div",null,n.a.createElement("div",null,"You Win! with ",e.state.moveHistory.length," Moves! "),n.a.createElement("input",{style:{marginRight:"5px",marginTop:"15px",marginBottom:"15px",float:"left"},id:"namesubmitHS",type:"text",placeholder:"Username"}),n.a.createElement("form",{onSubmit:e.submitAnswer,style:{marginRight:"5px",marginTop:"15px",marginBottom:"15px",float:"left"}},n.a.createElement("button",{type:"submit"},"Submit Highscore "))):n.a.createElement("div",null,n.a.createElement("form",{onSubmit:e.submitPuzzle,style:{marginRight:"5px",marginTop:"15px",marginBottom:"15px",float:"left"}},n.a.createElement("button",{type:"submit"},"Add Puzzle to Database")),n.a.createElement("input",{style:{marginRight:"5px",marginTop:"15px",marginBottom:"15px",float:"left"},id:"namesubmit",type:"text",placeholder:"Name Of Puzzle?"})):""},e.handlePlayerMovement=function(t){var o=e.handleCollision(t,e.state.robotSelected,e.state.playerState[e.state.robotSelected].color),a=e.state.playerState,n=e.state.moveHistory;(o=C(o,{colorSignifier:a[e.state.robotSelected].colorSignifier})).top==a[e.state.robotSelected].top&&o.left==a[e.state.robotSelected].left||n.push({dir:t.dir,robot:e.state.robotSelected,colorSignifier:a[e.state.robotSelected].colorSignifier}),a[e.state.robotSelected]=o,e.setState({playerState:a,moveHistory:n}),e.checkwin(o)},console.log(window.token),""==window.token.uri){for(var r=t.boardSize,i=t.playerSize,s=[],c=[],p=[],u=[],f={top:40*Math.floor(Math.random()*Math.floor(16)),left:40*Math.floor(Math.random()*Math.floor(16))},m=[f],d=0;d<5;d++)m.push(D(m));var h=C(m[1],{color:"#0015eb",colorSignifier:"blue"}),g=C(m[2],{color:"#15eb00",colorSignifier:"green"}),y=C(m[3],{color:"#eb0000",colorSignifier:"red"}),b=C(m[4],{color:"#ebeb00",colorSignifier:"yellow"});u.push(h),u.push(g),u.push(y),u.push(b);for(d=0;d<640;d+=40)for(var v=0;v<640;v+=40)s.push({top:v,left:d});for(d=0;d<640;d+=40)for(v=0;v<640;v+=40)Math.random()>.9&&c.push({top:v,left:d-4});for(d=0;d<640;d+=40)for(v=0;v<640;v+=40)Math.random()>.9&&p.push({top:v-4,left:d});e.state={playerState:u,boardSize:r,playerSize:i,boardState:s,wallHorizontal:p,wallVerticle:c,robotSelected:0,goal:f,moveHistory:[],playerStart:u.slice(),uri:"",createMode:"Yes",highscores:[]}}else console.log(window.uri),e.state=C(JSON.parse(window.token.puzzledata),{createMode:"No",uri:window.uri,highscores:window.highscores});return e}return Object(s.a)(a,[{key:"render",value:function(){var t=this;return n.a.createElement("div",{style:{width:"100%"}},"Moves:",n.a.createElement("div",{style:{height:""}},this.state.moveHistory.map((function(e){return n.a.createElement("img",{src:f[t.state.playerState[e.robot].colorSignifier][e.dir]})}))),n.a.createElement(b,{width:640,height:640},this.state.boardState.map((function(t){return n.a.createElement(g,{dimension:40,position:{top:t.top,left:t.left}})})),n.a.createElement(R,{dimension:40,position:this.state.goal}),this.state.playerState.map((function(e,o){return n.a.createElement(E,{dimension:40,position:{top:e.top,left:e.left},color:e.color,index:o,onClick:t.robotSelect,handlePlayerMovement:t.handlePlayerMovement})})),this.state.wallHorizontal.map((function(t){return n.a.createElement(z,{orientation:"horizontal",dimension:40,position:{top:t.top,left:t.left}})})),this.state.wallVerticle.map((function(t){return n.a.createElement(z,{orientation:"verticle",dimension:40,position:{top:t.top,left:t.left}})}))),n.a.createElement("div",{id:"controlPanel",style:{marginRight:"10px",float:"left"}},n.a.createElement("div",null,window.location.host+"/play/"+this.state.uri),this.state.playerState.map((function(e){return t.checkwin(e)})),n.a.createElement("form",{onSubmit:this.resetPuzzle,style:{marginRight:"5px",marginTop:"15px",marginBottom:"15px",float:"left"}},n.a.createElement("button",{type:"submit"},"Reset"))),n.a.createElement(H,{highscores:this.state.highscores}))}}]),a}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(_,{boardSize:640,playerSize:40}),document.getElementById("postscontainer")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.ec69ece5.chunk.js.map